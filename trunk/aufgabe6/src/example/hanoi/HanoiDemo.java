package hanoi;import shell.Command;import shell.CommandHandler;import shell.Shell;import shell.StringParameter;import shell.tools.HaltCommand;/** * Class HanoiDemo - die Hauptklasse der Simulation. *  *  Es handelt sich um ein sehr einfaches, textbasiertes Spiel. *  Dieses Spiel wird erst interessant, wenn man es ausbaut! *  *  Um die Simulation zu starten, erzeugen Sie ein "HanoiDemo"-Objekt  *  und rufen Sie dessen "play"-Methode auf. *  *  Diese Klasse baut eine Konfiguration auf, legt den Parser an,  *  der die Benutzereingaben entschluesselt und startet die Simulation.   *  Hier werden auch die vom Parser entschlüsselten Kommandos interpretiert. *   *  HIER UMGEBAUT ZUM KOMMANDOINTERPRETER FUER HANOI!! *   *  @author (adaptiert von Lothar Schmitz)  */class HanoiDemo {    private Konfiguration aktuell;            public static void main(String[] args) {       (new HanoiDemo(3)).play();    }    /**     * Spiel anlegen.     */    public HanoiDemo(int n)  {    	createCommands();        aktuell = new Konfiguration(20,20, n,"A","B","C");        Shell.getInstance().outln(aktuell.toString());    }        /**     * Erstellt die commands für die shell     *      *                                "animiert", "schnell",      */    private void createCommands(){ 	    	    	Command vorCommand = (new Command("vor", "Die Demo n Schritte vorspulen.", new CommandHandler(){    					@Override			public void execute(Command command) {				vorText(command.getParameterByName("param").getValueAsString());							}}));    	vorCommand.addParameter(new StringParameter("param", "Anzahl der Schritte."));    	    	Shell.getInstance().addCommand(vorCommand);    	    	Shell.getInstance().addCommand(new Command("vor", "Die Demo genau einen Schritt vorspulen.", new CommandHandler(){    					@Override			public void execute(Command command) {				vorText(null);			}}));    	    	    	    	Command rueckCommand = (new Command("rueck", "Die Demo n Schritte zurückspulen.", new CommandHandler(){    					@Override			public void execute(Command command) {				rueckText(command.getParameterByName("param").getValueAsString());							}}));    	rueckCommand.addParameter(new StringParameter("param", "Anzahl der Schritte."));    	    	Shell.getInstance().addCommand(rueckCommand);    	    	Shell.getInstance().addCommand(new Command("rueck", "Die Demo genau einen Schritt zurückspulen.", new CommandHandler(){    					@Override			public void execute(Command command) {				rueckText(null);			}}));    	    	    	Shell.getInstance().addCommand(new Command("zuege", "Zeigt die Zuege der Demo.", new CommandHandler(){    					@Override			public void execute(Command command) {				zuegeText();			}}));    	    	Shell.getInstance().addCommand(new Command("anfang", "Zum Anfang von der Demo.", new CommandHandler(){    					@Override			public void execute(Command command) {				zumAnfangText();			}}));    	    	Shell.getInstance().addCommand(new Command("ende", "Zum Ende von der Demo.", new CommandHandler(){    					@Override			public void execute(Command command) {				zumEndeText();			}}));    	    	Shell.getInstance().addCommand(new Command("animiert", "Wechselt in den Animationsmodus. Jeder einzelne Schritt wird animiert.", new CommandHandler(){    					@Override			public void execute(Command command) {				setzeAnimiert(true);			}}));    	    	Shell.getInstance().addCommand(new Command("schnell", "Deaktiviert den Animationsmodus. Jeder Schritt geschieht unverzüglich.", new CommandHandler(){    					@Override			public void execute(Command command) {				setzeAnimiert(false);			}}));    	//geht genauso wenig wie der nächste ansatz    	Shell.getInstance().addCommand(new Command("stop", "Beendet die Demo.", new CommandHandler(){						@Override			public void execute(Command command) {				Shell.getInstance().halt();					System.exit(0);			}}));    }    /**     *  Zentrale Verarbeitungsschleife.     */    public void play()     {        Shell.getInstance().outln(">>> Willkommen beim Türme-von-Hanoi-Spiel <<<"    			+ "\n" + "Mit dem Kommando '?' erhalten Sie eine Liste aller Kommandos");        Shell.getInstance().run();    }    // Implementierung der Befehle    /**      * Vorwaerts gehen um angegebene Schrittzahl (default: 1 Schritt).     */    private void vorText(String parameter)  {        if (parameter == null) {           aktuell.vor();        }        else {           try {aktuell.vor(Integer.parseInt(parameter));           }           catch (NumberFormatException nfe) {        	   Shell.getInstance().outln("Parameter ist keine ganze Zahl!!!");            }        }        Shell.getInstance().outln(aktuell.toString());    }    /**      * Zugliste anzeigen.     */    private void zuegeText()  {    	Shell.getInstance().outln(aktuell.zuegeToString());    }    /**      * Rueckwaerts gehen um angegebene Schrittzahl (default: 1 Schritt).     */    private void rueckText(String parameter)  {        if (parameter == null) {           aktuell.rueck();        }        else {           try {aktuell.rueck(Integer.parseInt(parameter));           }           catch (NumberFormatException nfe) {        	   Shell.getInstance().outln("Parameter ist keine ganze Zahl!!!");            }        }        Shell.getInstance().outln(aktuell.toString());    }    /**      * Zugfolge rueckwaerts bis zum Anfang abarbeiten.     */    private void zumAnfangText()  {        aktuell.zumAnfang();        Shell.getInstance().outln(aktuell.toString());    }    /**      * Zugfolge bis zum Ende abarbeiten.     */    private void zumEndeText()  {        aktuell.zumEnde();        Shell.getInstance().outln(aktuell.toString());    }        /**      * Zugliste anzeigen.     */    private void setzeAnimiert(boolean animiert)  {        if (animiert) {			Shell.getInstance().outln("Animationsmodus aktiviert");		}        else {			Shell.getInstance().outln("Animationsmodus deaktiviert");		}		aktuell.setzeAnimiert(animiert);    }}